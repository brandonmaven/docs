---
title: Twilio
description: "Collect payments with Maven on Twilio"
---

Collect payments mid-call using Maven with your Twilio application.

## Overview

1. Your application decides to collect a payment
2. Your server creates a Maven session via the API
3. Use `<Dial>` TwiML to transfer the customer to Maven's IVR
4. The customer enters their card details by phone keypad
5. Maven processes the payment and transfers the call back

## Create a Session

When you need to collect payment, call the Maven API from your server:

```bash
curl -X POST https://api.trymaven.com/v1/sessions \
  -H "Authorization: Bearer mvn_test_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "project": "my-app",
    "caller": "+14155551234",
    "amount": 2500,
    "mode": "charge",
    "callback": "+18005551234"
  }'
```

## Transfer the Call

Use TwiML to transfer the customer to the Maven IVR number:

```xml
<Response>
  <Dial>
    <Number>+14085551234</Number>
  </Dial>
</Response>
```

## Get the Result

After the call transfers back, retrieve the payment result by the caller's phone number:

```javascript
const res = await fetch(
  'https://api.trymaven.com/v1/sessions?caller=%2B14155551234',
  { headers: { 'Authorization': 'Bearer mvn_test_xxx' } }
);
const sessions = await res.json();
const latest = sessions[0];

console.log(latest.status); // "payment-success" or "payment-failed"
```

You can also poll by session ID: `GET /v1/sessions/:id` until `is_terminal` is `true`.

See [How It Works](/get-started/how-it-works) for the full flow and detailed examples.
