---
title: Sessions
description: "Create and manage payment sessions"
---

# Sessions

A session represents a single payment collection attempt. Create a session when you need to collect payment from a customer.

## Create Session

<ParamField path="POST" method="/v1/sessions">
  Create a new payment session
</ParamField>

### Request Body

<ParamField body="project" type="string" required>
  Project slug or UUID
</ParamField>

<ParamField body="caller" type="string" required>
  Customer's phone number in E.164 format (e.g., +14155551234)
</ParamField>

<ParamField body="amount" type="integer" required>
  Amount in cents (e.g., 2500 = $25.00)
</ParamField>

<ParamField body="currency" type="string" default="USD">
  Three-letter currency code
</ParamField>

<ParamField body="mode" type="string" default="charge">
  `charge` - Charge the card immediately
  `tokenize` - Save the card for later (no charge)
</ParamField>

<ParamField body="description" type="string">
  Description shown on card statement
</ParamField>

<ParamField body="callback" type="string">
  Phone number to transfer back to after payment
</ParamField>

<ParamField body="customer_id" type="string">
  Your internal customer ID
</ParamField>

<ParamField body="email" type="string">
  Customer email for receipts
</ParamField>

<ParamField body="metadata" type="object">
  Custom key-value pairs (returned in webhooks)
</ParamField>

### Response

<ResponseField name="session_id" type="string">
  Unique session identifier
</ResponseField>

<ResponseField name="status" type="string">
  Session status: `created`, `collecting`, `payment-success`, `payment-failed`, `cancelled`, `expired`
</ResponseField>

<ResponseField name="phone_number" type="string">
  IVR phone number for the customer to call
</ResponseField>

<ResponseField name="created_at" type="string">
  ISO 8601 timestamp
</ResponseField>

### Example

<CodeGroup>

```bash cURL
curl -X POST https://api.trymaven.com/v1/sessions \
  -H "Authorization: Bearer mvn_test_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "project": "my-project",
    "caller": "+14155551234",
    "amount": 2500,
    "currency": "USD",
    "mode": "charge",
    "callback": "+14155559999",
    "metadata": {
      "order_id": "ORD-123"
    }
  }'
```

```json Response
{
  "session_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "created",
  "phone_number": "+14085551234",
  "created_at": "2024-01-15T10:30:00Z"
}
```

</CodeGroup>

---

## Get Session

<ParamField path="GET" method="/v1/sessions/:id">
  Get details of an existing session
</ParamField>

### Response

Returns full session details including payment processor information if payment was processed.

```json
{
  "session_id": "550e8400-e29b-41d4-a716-446655440000",
  "project_slug": "my-project",
  "caller": "+14155551234",
  "status": "payment-success",
  "amount": 2500,
  "currency": "USD",
  "mode": "charge",
  "processor": {
    "type": "stripe",
    "stripe_charge_id": "ch_xxx"
  },
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:35:00Z"
}
```

---

## Cancel Session

<ParamField path="DELETE" method="/v1/sessions/:id">
  Cancel a pending session
</ParamField>

Only sessions in `created` or `collecting` status can be cancelled.

```bash
curl -X DELETE https://api.trymaven.com/v1/sessions/550e8400-xxx \
  -H "Authorization: Bearer mvn_test_xxx"
```

---

## Session Lifecycle

```
created → collecting → payment-success
                    → payment-failed
                    → cancelled
                    → expired (after 10 min)
```

| Status | Description |
|--------|-------------|
| `created` | Session created, waiting for call |
| `collecting` | Customer on call, entering card |
| `payment-success` | Payment completed |
| `payment-failed` | Payment failed (declined, timeout) |
| `cancelled` | Cancelled via API or customer |
| `expired` | Session expired (10 min timeout) |
