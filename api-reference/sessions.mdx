---
title: Sessions
description: "Create and manage payment sessions"
---

# Sessions

Sessions represent a single payment collection attempt. Create a session when your AI agent needs to collect a payment or save a card.

## Create Session

<ParamField path="POST" method="/v1/sessions" />

Create a new payment session.

<Note>
  Creating a new session for a phone number that already has an active session will automatically cancel the previous session.
</Note>

### Request Body

<ParamField body="project" type="string" required>
  Project identifier (UUID or slug)
</ParamField>

<ParamField body="caller" type="string" required>
  Customer's phone number in E.164 format (e.g., `+14155551234`)
</ParamField>

<ParamField body="amount" type="number" required>
  Amount to charge in cents (e.g., `2500` for $25.00). Must be greater than 0.
</ParamField>

<ParamField body="mode" type="string" required>
  Payment mode: `charge` (immediate payment) or `tokenize` (save card for later)
</ParamField>

<ParamField body="gateway" type="string" default="stripe">
  Payment gateway to process the payment.
</ParamField>

<ParamField body="email" type="string">
  Customer's email address. Used for receipt delivery if enabled in project settings.
</ParamField>

<ParamField body="full_name" type="string">
  Customer's full name (max 255 chars).
</ParamField>

<ParamField body="customer_id" type="string">
  Your internal customer identifier (max 255 chars). Returned in API responses for correlation.
</ParamField>

<ParamField body="description" type="string">
  Description shown on customer's card statement (max 500 chars)
</ParamField>

<ParamField body="callback" type="string">
  Phone number or SIP URI to transfer the customer back to after payment (E.164 format or `sip:` URI).
</ParamField>

<ParamField body="metadata" type="object">
  Custom key-value data attached to the session. Returned in API responses.
</ParamField>

### Response

<ResponseField name="session_id" type="string">
  Unique session identifier (UUID)
</ResponseField>

<ResponseField name="status" type="string">
  Initial session status: `created`
</ResponseField>

<ResponseField name="phone_number" type="string">
  IVR phone number for the customer to call or be transferred to.
</ResponseField>

<ResponseField name="checkout_url" type="string">
  Reserved for future use. Currently `null`.
</ResponseField>

<ResponseField name="created_at" type="string">
  ISO 8601 timestamp
</ResponseField>

### Example

<CodeGroup>

```bash cURL
curl -X POST https://api.trymaven.com/v1/sessions \
  -H "Authorization: Bearer mvn_test_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "project": "my-app",
    "caller": "+14155551234",
    "amount": 2500,
    "mode": "charge",
    "description": "Order #12345",
    "callback": "+18005551234"
  }'
```

```javascript Node.js
const response = await fetch('https://api.trymaven.com/v1/sessions', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer mvn_test_xxx',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    project: 'my-app',
    caller: '+14155551234',
    amount: 2500,
    mode: 'charge',
    description: 'Order #12345',
    callback: '+18005551234'
  })
});

const session = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api.trymaven.com/v1/sessions',
    headers={'Authorization': 'Bearer mvn_test_xxx'},
    json={
        'project': 'my-app',
        'caller': '+14155551234',
        'amount': 2500,
        'mode': 'charge',
        'description': 'Order #12345',
        'callback': '+18005551234'
    }
)

session = response.json()
```

</CodeGroup>

**Response:**
```json
{
  "session_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "created",
  "phone_number": "+14085551234",
  "checkout_url": null,
  "created_at": "2026-02-11T10:30:00Z"
}
```

---

## Get Session

<ParamField path="GET" method="/v1/sessions/:id" />

Retrieve details for a specific session.

### Path Parameters

<ParamField path="id" type="string" required>
  Session UUID
</ParamField>

### Response

```json
{
  "session_id": "550e8400-e29b-41d4-a716-446655440000",
  "project_slug": "my-app",
  "caller": "+14155551234",
  "status": "payment-success",
  "is_terminal": true,
  "amount": 2500,
  "currency": "USD",
  "mode": "charge",
  "description": "Order #12345",
  "email": "customer@example.com",
  "full_name": "Jane Smith",
  "customer_id": "cust_123",
  "gateway": "stripe",
  "callback": "+18005551234",
  "checkout_url": null,
  "metadata": {"order_id": "12345"},
  "processor": {
    "stripe_payment_intent_id": "pi_xxx",
    "stripe_charge_id": "ch_xxx",
    "payment_method_id": null,
    "card_brand": "visa",
    "card_last4": "4242",
    "receipt_url": "https://pay.stripe.com/receipts/..."
  },
  "error": null,
  "created_at": "2026-02-11T10:30:00Z",
  "updated_at": "2026-02-11T10:35:00Z",
  "completed_at": "2026-02-11T10:35:00Z"
}
```

<ResponseField name="session_id" type="string">
  Unique session identifier (UUID)
</ResponseField>

<ResponseField name="project_slug" type="string">
  Project slug
</ResponseField>

<ResponseField name="caller" type="string">
  Customer's phone number in E.164 format
</ResponseField>

<ResponseField name="status" type="string">
  Current session status (see table below)
</ResponseField>

<ResponseField name="is_terminal" type="boolean">
  Whether the session has reached a final state (`payment-success`, `payment-failed`, `expired`, or `cancelled`). Useful for polling — stop polling when `true`.
</ResponseField>

<ResponseField name="amount" type="number">
  Amount in cents
</ResponseField>

<ResponseField name="currency" type="string">
  Currency code (e.g., `USD`)
</ResponseField>

<ResponseField name="email" type="string">
  Customer's email address, if provided
</ResponseField>

<ResponseField name="full_name" type="string">
  Customer's full name, if provided
</ResponseField>

<ResponseField name="customer_id" type="string">
  Merchant's customer identifier, if provided
</ResponseField>

<ResponseField name="processor" type="object">
  Payment processor details. Present after payment is processed.
  - `stripe_payment_intent_id` — Stripe PaymentIntent ID (charge mode)
  - `stripe_charge_id` — Stripe Charge ID (charge mode)
  - `payment_method_id` — Stripe PaymentMethod ID (tokenize mode)
  - `card_brand` — Card brand (e.g., `visa`, `mastercard`)
  - `card_last4` — Last 4 digits of the card
  - `receipt_url` — Stripe-hosted receipt URL (charge mode)
</ResponseField>

<ResponseField name="error" type="object">
  Error details when status is `payment-failed`. Contains `code` (machine-readable) and `message` (human-readable).
</ResponseField>

<ResponseField name="completed_at" type="string">
  ISO 8601 timestamp of when the session reached a terminal state. `null` if still in progress.
</ResponseField>

### Session Status Values

| Status | Description |
|--------|-------------|
| `created` | Session created, waiting for call |
| `collecting` | Customer connected, collecting card info |
| `processing` | Processing payment |
| `payment-success` | Payment completed successfully |
| `payment-failed` | Payment failed |
| `expired` | Session expired (no call received) |
| `cancelled` | Session was cancelled |

---

## Get Session by Caller

<ParamField path="GET" method="/v1/sessions?caller={phone}" />

Look up the most recent session for a phone number. Returns the active session if one exists, otherwise falls back to the most recent terminal session.

### Query Parameters

<ParamField query="caller" type="string" required>
  Customer's phone number in E.164 format (e.g., `+14155551234`)
</ParamField>

### Response

Same response format as [Get Session](#get-session).

### Example

<CodeGroup>

```bash cURL
curl "https://api.trymaven.com/v1/sessions?caller=%2B14155551234" \
  -H "Authorization: Bearer mvn_test_xxx"
```

```javascript Node.js
const phone = encodeURIComponent('+14155551234');
const response = await fetch(`https://api.trymaven.com/v1/sessions?caller=${phone}`, {
  headers: { 'Authorization': 'Bearer mvn_test_xxx' }
});

const session = await response.json();
```

```python Python
import requests

response = requests.get(
    'https://api.trymaven.com/v1/sessions',
    params={'caller': '+14155551234'},
    headers={'Authorization': 'Bearer mvn_test_xxx'}
)

session = response.json()
```

</CodeGroup>

---

## Cancel Session

<ParamField path="POST" method="/v1/sessions/:id/cancel" />

Cancel a pending session. Only sessions in `created` or `collecting` status can be cancelled.

### Path Parameters

<ParamField path="id" type="string" required>
  Session UUID
</ParamField>

### Response

Returns `204 No Content` on success.

### Example

```bash
curl -X POST https://api.trymaven.com/v1/sessions/550e8400-e29b-41d4-a716-446655440000/cancel \
  -H "Authorization: Bearer mvn_test_xxx"
```
